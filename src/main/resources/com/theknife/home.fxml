<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.theknife.HomeController"
            prefWidth="800" prefHeight="600"
            style="-fx-background-color: rgb(47,98,84);">

    <!-- HEADER -->
    <top>
        <BorderPane>
            <right>
                <HBox alignment="TOP_RIGHT">
                    <padding>
                        <Insets top="15" right="15" bottom="15" left="15"/>
                    </padding>
                    <ImageView fx:id="userIcon" fitWidth="40" fitHeight="40"
                               pickOnBounds="true" preserveRatio="true"
                               onMouseClicked="#onUserIconClicked">
                        <image>
                            <Image url="@userIcon.png"/>
                        </image>
                    </ImageView>
                </HBox>
            </right>
        </BorderPane>
    </top>

    <!-- CONTENUTO CENTRALE -->
    <center>
        <VBox alignment="CENTER" spacing="25">

            <VBox alignment="CENTER" spacing="20" maxWidth="650"
                  style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 40;">

                <!-- Logo -->
                <ImageView fx:id="logoImage" fitHeight="90" fitWidth="90">
                    <image>
                        <Image url="@logo.png"/>
                    </image>
                </ImageView>

                <!-- Titolo -->
                <Label text="Trova il ristorante giusto per te!"
                       style="-fx-font-size: 26px; -fx-font-weight: bold; -fx-text-fill: rgb(47,98,84);"/>

                <!-- Barra di ricerca -->
                <HBox spacing="0" alignment="CENTER">

                    <!-- Campo Posizione/Domicilio -->
                    <TextField fx:id="positionField"
                               prefWidth="150" prefHeight="35"
                               style="-fx-font-size: 14px; -fx-border-color: rgb(47,98,84); -fx-border-width: 1;
                                      -fx-background-radius: 10 0 0 10; -fx-border-radius: 10 0 0 10;"/>

                    <!-- Campo Ricerca -->
                    <TextField fx:id="searchField"
                               promptText="Nome del ristorante, tipo di cucina..."
                               prefWidth="270" prefHeight="35"
                               style="-fx-font-size: 14px; -fx-border-color: rgb(47,98,84); -fx-border-width: 1;"/>

                    <!-- Bottone Filtri -->
                    <Button fx:id="filterButton"
                            prefWidth="45" prefHeight="35"
                            onAction="#onFilterClicked"
                            style="-fx-background-color: white; -fx-border-color: rgb(47,98,84); -fx-border-width: 1;">
                        <graphic>
                            <ImageView fitWidth="20" fitHeight="20">
                                <image>
                                    <Image url="@filterIcon.png"/>
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>

                    <!-- Bottone Cerca -->
                    <Button text="Cerca"
                            prefWidth="100" prefHeight="35"
                            onAction="#onSearchClicked"
                            style="-fx-background-color: rgb(47,98,84); -fx-text-fill: white; -fx-font-weight: bold;
                                   -fx-background-radius: 0 10 10 0; -fx-border-radius: 0 10 10 0; -fx-font-size: 14px;"/>
                </HBox>

                <!-- MENU FILTRI (inizialmente nascosto) -->
                <VBox fx:id="filtersBox"
                      alignment="CENTER_LEFT"
                      spacing="15"
                      visible="false" managed="false"
                      style="-fx-background-color: #f5f5f5; -fx-border-color: rgb(47,98,84); -fx-border-radius: 10;
                             -fx-background-radius: 10; -fx-padding: 20; -fx-max-width: 500;">

                    <!-- Tipologia di cucina -->
                    <Label text="Tipologia di cucina:" style="-fx-font-weight: bold;"/>
                    <HBox spacing="20">
                        <RadioButton fx:id="italianaCheck" text="Italiana"/>
                        <RadioButton fx:id="burgerCheck" text="Burger"/>
                        <RadioButton fx:id="asiaticaCheck" text="Asiatica"/>
                        <RadioButton fx:id="sudamericanaCheck" text="Sudamericana"/>
                    </HBox>

                    <!-- Prezzo -->
                    <Label text="Prezzo:" style="-fx-font-weight: bold;"/>
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Min:"/>
                        <TextField fx:id="prezzoMinField" prefWidth="60"/>
                        <Label text="Max:"/>
                        <TextField fx:id="prezzoMaxField" prefWidth="60"/>
                    </HBox>

                    <!-- Servizio delivery -->
                    <Label text="Servizio delivery:" style="-fx-font-weight: bold;"/>
                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <RadioButton fx:id="deliverySi" text="Sì" toggleGroup="$deliveryGroup"/>
                        <RadioButton fx:id="deliveryNo" text="No" toggleGroup="$deliveryGroup"/>
                    </HBox>

                    <!-- Prenotazioni online -->
                    <Label text="Prenotazioni online:" style="-fx-font-weight: bold;"/>
                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <RadioButton fx:id="prenotazioniSi" text="Sì" toggleGroup="$prenotazioniGroup"/>
                        <RadioButton fx:id="prenotazioniNo" text="No" toggleGroup="$prenotazioniGroup"/>
                    </HBox>

                    <!-- Voto -->
                    <Label text="Voto minimo:" style="-fx-font-weight: bold;"/>
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="★" style="-fx-text-fill: gold; -fx-font-size: 18px;"/>
                        <Slider fx:id="votoSlider"
                                min="0" max="5" value="0" blockIncrement="0.5" majorTickUnit="0.5"
                                snapToTicks="true" showTickLabels="true" showTickMarks="true"
                                prefWidth="200"/>
                        <Label fx:id="votoValueLabel" text="0.0"/>
                    </HBox>

                </VBox>
            </VBox>
        </VBox>
    </center>

</BorderPane>
